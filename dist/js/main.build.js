const monthlyBasicIncomeField=document.getElementById("monthlyBasicIncome"),monthlyAllowanceIncomeField=document.getElementById("monthlyAllowanceIncome"),ssfField=document.getElementById("ssf"),ssfCheck=document.getElementById("ssfCheck"),maritalStatusField=document.getElementsByName("maritalStatus"),lifeInsuranceCheckField=document.getElementById("lifeInsuranceCheck"),healthInsuranceCheckField=document.getElementById("healthInsuranceCheck");let basic=0,allowance=0,ssf=insurance=0,maritalStatus=maritalStatusField[0].value,deductions=(monthlyBasicIncomeField.addEventListener("blur",function(){basic=parseFloat(monthlyBasicIncomeField.value,10)||0,allowance=basic/.6*.4,monthlyAllowanceIncomeField.value=allowance}),ssfCheck.addEventListener("change",function(e){ssfCheck.checked?(ssf=.31*basic,ssfField.value=ssf):ssfField.value=0}),maritalStatusField.forEach(function(e){e.addEventListener("change",function(){maritalStatus=e.value})}),{});function checkboxes(){document.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.addEventListener("change",e=>{var t=e.currentTarget.getAttribute("name"),n=e.currentTarget.value,a=document.getElementById(""+e.currentTarget.dataset.field);return e.currentTarget.checked?(deductions={...deductions,[t]:""===n||n},a?.removeAttribute("disabled"),console.log(deductions)):(a?.setAttribute("disabled",""),deductions={...deductions,[t]:!1},console.log(deductions)),deductions})})}function validateAndCalculate(){var e=document.getElementById("fullName").value,t=document.getElementById("email").value,n=document.getElementById("phone").value,a=Number(document.getElementById("totalMonth").value),l=parseFloat(document.getElementById("bonus").value)||0,c=parseFloat(document.getElementById("cit").value)||0,o=parseFloat(document.getElementById("pf").value)||0,u=document.getElementById("taxDetails"),s=(ssf+c+o)*a,d=basic+allowance,i=d*a+l,s=i-(s+(insurance=(Number(deductions?.lifeInsuranceCheck)||0)+(Number(deductions?.healthInsuranceCheck)||0)));console.log(insurance);let r=0;r=("Unmarried"===maritalStatus?calculateTaxUnmarried:calculateTaxMarried)(s);var m=d-(.11*basic+c+o+r/a),e={fullName:e,email:t,phone:n,maritalStatus:maritalStatus,taxableIncome:s,inbank:{monthly:m,bonus:l,salaryAnnually:m*a+l},remuneration:{monthly:d+ssf,Annually:i+ssf*a},deduction:{ssf:ssf,cit:c,pf:o},tax:{monthly:r/a,Annually:r}};return console.log(s),console.log(e),localStorage.setItem("taxData",JSON.stringify(e)),u.innerHTML="Income Tax Calculated: NPR "+r,alert("Income Tax Calculated: NPR "+r),!1}function validateEmail(e){return/\S+@\S+\.\S+/.test(e)}function validatePhone(e){return/^\d{10}$/.test(e)}function calculateAllowanceSSF(e){}function calculateTaxUnmarried(e){var t;return e<=5e5?(t=.01*e,console.log(t),t):e<=7e5?5e3+.1*(e-5e5):e<=2e6?25e3+.2*(e-7e5):275e3+.3*(e-2e6)}function calculateTaxMarried(e){return console.log(e),e<=6e5?.01*e:e<=8e5?6e3+.1*(e-6e5):e<=2e6?26e3+.2*(e-8e5):266e3+.3*(e-2e6)}checkboxes();